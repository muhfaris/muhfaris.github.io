<!DOCTYPE html>
<html class="scroll-smooth hover:scroll-auto dark" lang=" en-US">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>Cara membuat trigger manual ci/cd di github action | Muh Faris</title>

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Cara membuat trigger manual ci/cd di github action | Muh Faris</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Cara membuat trigger manual ci/cd di github action" />
<meta name="author" content="muhfaris" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Untuk trigger workflow manual di github action diperlukan konfigurasi on.workflow_dispatch di file yaml. Berikut langkah-langkah cara mengkonfigurasinya." />
<meta property="og:description" content="Untuk trigger workflow manual di github action diperlukan konfigurasi on.workflow_dispatch di file yaml. Berikut langkah-langkah cara mengkonfigurasinya." />
<link rel="canonical" href="https://muhfaris.com/trigger-manual-ci-cd-github-action" />
<meta property="og:url" content="https://muhfaris.com/trigger-manual-ci-cd-github-action" />
<meta property="og:site_name" content="Muh Faris" />
<meta property="og:image" content="https://muhfaris.com/assets/images/manual-trigger-ci-cd-github.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-06-01T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://muhfaris.com/assets/images/manual-trigger-ci-cd-github.png" />
<meta property="twitter:title" content="Cara membuat trigger manual ci/cd di github action" />
<meta name="twitter:site" content="@_muh_faris" />
<meta name="twitter:creator" content="@muhfaris" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"muhfaris"},"dateModified":"2024-06-01T00:00:00+00:00","datePublished":"2024-06-01T00:00:00+00:00","description":"Untuk trigger workflow manual di github action diperlukan konfigurasi on.workflow_dispatch di file yaml. Berikut langkah-langkah cara mengkonfigurasinya.","headline":"Cara membuat trigger manual ci/cd di github action","image":"https://muhfaris.com/assets/images/manual-trigger-ci-cd-github.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://muhfaris.com/trigger-manual-ci-cd-github-action"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://muhfaris.com/assets/images/logo.png"},"name":"muhfaris"},"url":"https://muhfaris.com/trigger-manual-ci-cd-github-action"}</script>
<!-- End Jekyll SEO tag -->


  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/theme.css">
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-1QWG9YKN41"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-1QWG9YKN41');
  </script>
</head>

<body class="w-fit sm:w-auto">
  <header class="gaps-4 py-4 px-10 dark:bg-gray-900 dark:text-white">
    <div class="container mx-auto flex items-center justify-between">
      <div class="logo flex items-center justify-center text-16 md:text-2xl font-bold pb-4 md:pb-3">
        <a href="/" class="relative -mt-2">
          <span class="text-6xl text-teal-500">.</span>
          <span
            class="before:block before:absolute before:-inset-1 before:-skew-y-3 before:bg-teal-500 relative inline-block">
            <span class="relative text-white">muhfaris</span>
          </span>
        </a>
      </div>
      <nav class="hidden sm:block">
        <ul class="flex font-semibold text-xl">
          <li>
            <a href="/blog" class="mr-4 dark:text-white dark:hover:text-teal-400">/blog</a>
          </li>
          <li>
            <a href="mailto:dev@muhfaris.com" class="mr-4 dark:text-white dark:hover:text-teal-400">/contact</a>
          </li>
          <li>
            <a href="#project" class="dark:text-white dark:hover:text-teal-400">/project</a>
          </li>
        </ul>
      </nav>
      <nav class="sm:hidden">
        <ul class="flex items-center font-semibold text-xl">
          <li class="px-2 mr-4">
            <a href="/blog" class="dark:text-white dark:hover:text-teal-400">
              <svg class="fill-grey-500 hover:fill-teal-500 w-5 h-5 text-gray-800 dark:text-white" aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                <path
                  d="M19 4h-1a1 1 0 1 0 0 2v11a1 1 0 0 1-2 0V2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v15a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V5a1 1 0 0 0-1-1ZM3 4a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4Zm9 13H4a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2Zm0-3H4a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2Zm0-3H4a1 1 0 0 1 0-2h8a1 1 0 1 1 0 2Zm0-3h-2a1 1 0 0 1 0-2h2a1 1 0 1 1 0 2Zm0-3h-2a1 1 0 0 1 0-2h2a1 1 0 1 1 0 2Z" />
                <path d="M6 5H5v1h1V5Z" />
              </svg>
            </a>
          </li>
          <li class="px-2 mr-4">
            <a href="#project" class="dark:text-white dark:hover:text-teal-400">
              <svg class="fill-grey-500 hover:fill-teal-500 w-5 h-5 text-gray-800 dark:text-white" aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 16">
                <path
                  d="M18 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2ZM5 12a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm0-3a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm0-3a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm10 6H9a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2Zm0-3H9a1 1 0 0 1 0-2h6a1 1 0 1 1 0 2Zm0-3H9a1 1 0 0 1 0-2h6a1 1 0 1 1 0 2Z" />
              </svg>
            </a>
          </li>
          <li class="px-2 mr-4">
            <a href="mailto:dev@muhfaris.com" class="dark:text-white dark:hover:text-teal-400">
              <svg class="fill-grey-500 hover:fill-teal-500 w-5 h-5 text-gray-800 dark:text-white" aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 16">
                <path d="m10.036 8.278 9.258-7.79A1.979 1.979 0 0 0 18 0H2A1.987 1.987 0 0 0 .641.541l9.395 7.737Z" />
                <path
                  d="M11.241 9.817c-.36.275-.801.425-1.255.427-.428 0-.845-.138-1.187-.395L0 2.6V14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2.5l-8.759 7.317Z" />
              </svg>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </header>
  <!-- Content -->
  <main role="main" class="site-content dark:bg-gray-800">
<div
  x-data="{atTop:true}"
  class="post flex flex-col justify-between"
  :class="{'min-h-screen' :'h-screen'}"
  @scroll.window="atTop = (window.pageYOffset > 20 ? false:true)"
>
  <main class="w-auto mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0">
    <div class="container mx-auto flex justify-center px-4 text-white">
      <div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700">
        <header class="pt-6 xl:pb-6">
          <div class="space-y-1 text-center">
            <div>
              <h1
                class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14"
              >
                Cara membuat trigger manual ci/cd di github action
              </h1>
            </div>

            <dl class="space-y-10">
              <div>
                <dt class="sr-only">Published on</dt>
                <dd
                  class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400 mt-2"
                >
                  <time datetime="2021-05-02T00:00:00.000Z"
                    >Saturday, June 1,2024</time
                  >
                </dd>
              </div>
            </dl>
          </div>
        </header>
        <div
          class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0"
          style="grid-template-rows: auto 1fr"
        >
          <dl
            class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"
          >
            <dt class="sr-only">Authors</dt>
            <dd>
              <ul
                class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"
              >
                <li class="flex items-center space-x-2">
                  <span
                    style="
                      box-sizing: border-box;
                      display: inline-block;
                      overflow: hidden;
                      width: initial;
                      height: initial;
                      background: none;
                      opacity: 1;
                      border: 0px;
                      margin: 0px;
                      padding: 0px;
                      position: relative;
                      max-width: 100%;
                    "
                    ><span
                      style="
                        box-sizing: border-box;
                        display: block;
                        width: initial;
                        height: initial;
                        background: none;
                        opacity: 1;
                        border: 0px;
                        margin: 0px;
                        padding: 0px;
                        max-width: 100%;
                      "
                      ><img
                        alt=""
                        aria-hidden="true"
                        src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2738%27%20height=%2738%27/%3e"
                        style="
                          display: block;
                          max-width: 100%;
                          width: initial;
                          height: initial;
                          background: none;
                          opacity: 1;
                          border: 0px;
                          margin: 0px;
                          padding: 0px;
                        " /></span
                    ><img
                      alt="avatar"
                      srcset="/assets/images/faris.jpg"
                      src="/assets/images/faris.jpg"
                      decoding="async"
                      data-nimg="intrinsic"
                      class="h-10 w-10 rounded-full"
                      style="
                        position: absolute;
                        inset: 0px;
                        box-sizing: border-box;
                        padding: 0px;
                        border: none;
                        margin: auto;
                        display: block;
                        width: 0px;
                        height: 0px;
                        min-width: 100%;
                        max-width: 100%;
                        min-height: 100%;
                        max-height: 100%;
                      "
                  /></span>
                  <dl class="whitespace-nowrap text-sm font-medium leading-5">
                    <dt class="sr-only">Name</dt>
                    <dd class="text-gray-900 dark:text-gray-100">
                      muhfaris
                    </dd>
                    <dt class="sr-only">Twitter</dt>
                    <dd>
                      <a
                        target="_blank"
                        rel="noopener noreferrer"
                        href="https://twitter.com/_muh_faris"
                        class="text-teal-500 hover:text-teal-600 dark:hover:text-teal-400"
                        >@Twitter</a
                      >
                    </dd>
                  </dl>
                </li>
              </ul>
            </dd>
          </dl>
          <div
            class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"
          >
            
            <div id="table-of-contents" class="bg-gray-900 p-5">
              <h2 class="font-semibold">Table of Contents</h2>
              <ul id="toc" class="font-semibold list-disc hover:list-decimal list-inside">
<li class="toc-entry toc-h2"><a href="#problem">Problem</a></li>
<li class="toc-entry toc-h2"><a href="#solution">Solution</a></li>
</ul>
            </div>
            
            <article
              class="prose dark:prose-invert prose-lg xl:prose-xl max-w-none pt-10 pb-8"
            >
              <h2 id="problem">Problem</h2>

<p>Masalah yang terjadi adalah, untuk trigger manual ci/cd di github action itu tidak bisa dan dari UI github pada menu Action pun juga tidak tersedia. Kenapa ini penting? dari pengalaman saya, selama ini menggunakan github sebagai repository dan menggunakan portainer sebagai management containernya bukan kubernetes.</p>

<p>Yang terjadi ketika harus revert version pada aplikasi antara deploy ulang dari portainer atau kita revert kode dan melakukan deploy ulang, langkah-langkah yang terjadi cukup ribet menurutku.</p>

<h2 id="solution">Solution</h2>

<p>Walaupun di github tidak menyediakan UI untuk mengatur trigger manual, kita bisa melakukan konfigurasi sendiri untuk membuat UI tersebut dan memunculkannya pada github action. Goalnya adalah ketika kita revert aplikasi kita bisa set ke version tertentu ataupun kita juga bisa memilih branch mana yang akan dideploy ulang.
Untuk langkah-langkahnya sebagai berikut:</p>

<ol>
  <li>Buat file <code class="language-html highlighter-rouge">.github/workflows/manual-trigger-ci-cd.yml</code> di folder <code class="language-html highlighter-rouge">.github/workflows</code> di repository kita.</li>
  <li>Copy kode berikut ke file <code class="language-html highlighter-rouge">manual-trigger-ci-cd.yml</code></li>
</ol>

<div class="language-yaml w-96 overflow-x-auto md:w-full highlighter-rouge"><div class="highlight"><pre class="highlight w-full"><code><span class="nn">---</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Manual deploy</span> <span class="c1"># Workflow name displayed on GitHub</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">changelog</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Set Repository ENV variables</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">echo "REPO_NAME=${GITHUB_REPOSITORY#$GITHUB_REPOSITORY_OWNER/}" &gt;&gt; $GITHUB_ENV</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v3</span>
      <span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s">commit</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">pr-mpt/actions-commit-hash@v2</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Setup buildx</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">docker/setup-buildx-action@v2</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Docker build</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">docker build -t aplikasi-svc .</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Push docker image latest staging</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">docker push aplikasi-svc</span>
  <span class="na">deploy-svc</span><span class="pi">:</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="s">deploy-image</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Webhook loyalty-svc</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">webhook-request</span>
        <span class="na">if</span><span class="pi">:</span> <span class="s">github.ref_name == 'staging'</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">muhfaris/request-action@v0.1.1</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">url</span><span class="pi">:</span> <span class="s">$?tag=latest</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Make webhook request with image version</span>
        <span class="na">if</span><span class="pi">:</span> <span class="s">github.ref_name == 'main'</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">webhook-request</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">muhfaris/request-action@v0.1.1</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">url</span><span class="pi">:</span> <span class="s">$?tag=$</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Display API Response Status</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">echo "Response Status: $"</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Display API Response Data</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">echo "Response Data: $"</span>
</code></pre></div></div>

<p>Pada konfigurasi di atas, kita menggunakan <code class="language-html highlighter-rouge">workflow_dispatch</code> untuk mengatur trigger manual di github action. Kemudian pada bagian <code class="language-html highlighter-rouge">jobs</code> adalah task yang akan dijalankan setelah kita submit trigger manual tersebut. Bagaimana tampilan UInya di github itu akan seperti berikut:</p>

<p class="w-96 md:w-full"><img src="assets/images/manual-trigger-ci-cd-github.png" alt="workflow_dispatch" /></p>

<p>Referensi:</p>

<ul>
  <li>https://docs.github.com/en/actions/using-workflows/manually-running-a-workflow</li>
</ul>

            </article>
            <div class="pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300">
              <a
                target="_blank"
                rel="nofollow"
                href="https://mobile.twitter.com/search?q=https%3A%2F%2Ftailwind-nextjs-starter-blog.vercel.app%2Fblog%2Fnested-route%2Fintroducing-multi-part-posts-with-nested-routing"
                >Discuss on Twitter</a
              >
              •
              <a
                target="_blank"
                rel="noopener noreferrer"
                href="https://github.com/timlrx/tailwind-nextjs-starter-blog/blob/master/data/blog/nested-route/introducing-multi-part-posts-with-nested-routing.md"
                >View on GitHub</a
              >
            </div>
            <div id="comment">
              <div
                class="pt-6 pb-6 text-center text-gray-700 dark:text-gray-300"
              >
                <script
                  src="https://giscus.app/client.js"
                  data-repo="muhfaris/muhfaris.github.io"
                  data-repo-id="MDEwOlJlcG9zaXRvcnk4NTcxNzYxNQ=="
                  data-category="Comments"
                  data-category-id="DIC_kwDOBRvyb84CUJNs"
                  data-mapping="url"
                  data-strict="0"
                  data-reactions-enabled="1"
                  data-emit-metadata="0"
                  data-input-position="bottom"
                  data-theme="dark_tritanopia"
                  data-lang="en"
                  data-loading="lazy"
                  crossorigin="anonymous"
                  async
                ></script>
              </div>
            </div>
          </div>
          <footer>
            <div
              class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"
            >
              <div class="py-4 xl:py-8">
                <h2
                  class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400"
                >
                  Tags
                </h2>
                <div class="flex flex-wrap">
                  
                  <a
                    class="mr-3 text-sm font-medium uppercase text-teal-500 hover:text-teal-600 dark:hover:text-teal-400"
                    href="/categories/development"
                    >development</a
                  >
                  
                </div>
              </div>
              <div
                class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"
              >
                <div>
                  <h2
                    class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400"
                  >
                    Previous Article
                  </h2>
                  <div
                    class="text-teal-500 hover:text-teal-600 dark:hover:text-teal-400"
                  >
                    <a href="/fixing-golang-not-the-empty-string"
                      >Fixing Golang 1.21.5 error not the empty string</a
                    >
                  </div>
                </div>
                <div>
                  <h2
                    class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400"
                  >
                    Next Article
                  </h2>
                  <div
                    class="text-teal-500 hover:text-teal-600 dark:hover:text-teal-400"
                  >
                    <a href="/nvim-plugins-part-1">Perjalanan membuat plugin di nvim part 1</a>
                  </div>
                </div>
              </div>
            </div>
            <div class="pt-4 xl:pt-8">
              <a
                class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"
                href="/"
                >← Back to the blog</a
              >
            </div>
          </footer>
        </div>
      </div>
    </div>
  </main>
</div>
</main>
  <!-- Footer -->
  <footer class="text-gray-600 body-font">
    <div class="dark:bg-gray-900">
      <div class="container px-5 py-6 mx-auto flex items-center sm:flex-row flex-col">
        <a class="flex title-font font-medium items-center md:justify-start justify-center text-gray-900">
        </a>
        <p class="text-sm dark:text-white sm:ml-6 sm:mt-0 mt-4">
          © 2023 Muh Faris—
          <a href="https://twitter.com/_muh_faris" rel="noopener noreferrer" class="dark:text-white ml-1"
            target="_blank">@_muh_faris</a>
        </p>
        <span class="inline-flex sm:ml-auto sm:mt-0 mt-4 justify-center sm:justify-start">
          <a class="ml-3 dark:text-white">
            <svg fill="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-5 h-5"
              viewBox="0 0 24 24">
              <path
                d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z">
              </path>
            </svg>
          </a>
          <a class="ml-3 dark:text-white">
            <svg fill="currentColor" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
              stroke-width="0" class="w-5 h-5" viewBox="0 0 24 24">
              <path stroke="none"
                d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z"></path>
              <circle cx="4" cy="4" r="2" stroke="none"></circle>
            </svg>
          </a>
        </span>
      </div>
    </div>
  </footer>
</body>

</html>
